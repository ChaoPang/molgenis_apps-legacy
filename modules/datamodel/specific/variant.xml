<?xml version="1.0" encoding="UTF-8"?>
<molgenis name="org.molgenis">
	<module name="variant">
		<description>This module extends Pheno-OM with Feature types to
			represent seqeuence variant observations. Hence, the typical usage
			will be 'Individual {- observation -} SequenceFeature. (analogues for
			Samples, Panels). Also details on SequenceFeatures, such as allele
			counts, can be reported using a 3-way relationship. E.g.
			Panel(gonl) {- observation(relation=Feature(name=AlleleCount)), value=6) -} SequenceFeature
			.
		</description>
		<entity name="GenomeBuild" extends="ObservableFeature">
			<description>Reference to the genome build used. TODO: expand with
				link to genome build file/version/database ids etc. E.g. 'hg19'.
			</description>
			<field name="Species" type="xref" xref_entity="Species"
				description="Species that this genome build is made for." />
			<field name="Files" type="mref" xref_entity="MolgenisFile"
				description="Typically a link to files containing the reference sequence, or BED file listing the genes." />
			<unique fields="Name" />
		</entity>
		<entity name="Chromosome" extends="ObservableFeature">
			<description>List of chromosome names (or contig names) within a
				genomebuild. E.g. '1' or 'X' or 'chr1'.
			</description>
			<field name="genomeBuild" type="xref" xref_entity="GenomeBuild" />
			<field name="orderNr" type="int"
				description="Sorting order of chromosomes within the species" />
			<field name="isAutosomal" type="bool"
				description="equal number of chromosomes in male/females, i.e., not sex chromosomes." />
			<field name="bpLength" type="int" nillable="true"
				description="length of the chromosome in the genome build" />
			<unique fields="genomeBuild,name" description="Chromosome belongs to species. E.g. hg19:chr1" />
		</entity>
		<entity name="SequenceFeature" abstract="true">
			<decription>SequenceFeature is a minimal description for sequence
				properties. It is used as basis for specific SequenceFeatures such
				as gene, exon, domain, variant, transcript, protein.
			</decription>
			<field name="chr" type="xref" xref_entity="Chromosome"
				description="reference chromosome used. Note: we treat each chromosome build as unique!" />
			<field name="startBP" type="int"
				description="start position respective of reference sequence" />
			<field name="endBP" type="int"
				description="end position respective of reference sequence" />
			<!-- used to be called 'start' and 'end' but that is a reserved word in 
				some database enginges -->
			<field name="dbRefs" type="mref" xref_entity="OntologyTerm" />
		</entity>
		<entity name="SequenceVariant" implements="SequenceFeature"
			extends="ObservableFeature">
			<description>
				Describe sequence variants respective to a reference chromosome/contig. Example
				usage:
				<table>
					<tr>
						<td>target</td>
						<td>feature</td>
						<td>relation</td>
						<td>value</td>
					</tr>
					<tr>
						<td>Individual(Patient1)</td>
						<td>SequenceVariant(variantType=snp,ref=A,alt=T)</td>
						<td>OntologyTerm(Phased Genotype)</td>
						<td>T/A</td>
					</tr>
					<tr>
						<td>Panel(GoNL)</td>
						<td>SequenceVariant(variantType=snp,ref=A,alt=T)</td>
						<td>OntologyTerm(Allele Count)</td>
						<td>6</td>
					</tr>
				</table>
			</description>
			<field name="variantType" type="enum" enum_options="[snp,indel,cnv]"
				default="snp" description="type of the variant" />
			<field name="ref"
				description="sequence in the reference. Very long sequences variants will be stored elsewhere." />
			<field name="alt"
				description="alternative sequences observed, if multiple then seperated by ','" />
		</entity>
		<entity name="Gene" implements="SequenceFeature" extends="ObservableFeature">
			<field name="nuclSequence" type="text"
				description="Nucleotide sequence (bases) of the gene." label="Nucleotide sequence" />
		</entity>
		<entity name="Transcript" implements="SequenceFeature" extends="ObservableFeature">
			<field name="mrnaSequence" type="text"
				description="Nucleotide sequence (bases) of the transcript" label="Nucleotide sequence" />
		</entity>
		<entity name="Allele" extends="ObservationElement">
		</entity>
	</module>
</molgenis>